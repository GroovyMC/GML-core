minecraft {
    mappings channel: 'parchment', version: '1.18.2-2022.07.17-1.19'
    runs {
        client {}
        server {}
        jijtest {
            parent runs.client
        }
    }
}

dependencies {
    runtimeOnly files(
            tasks.fullJar.archiveFile.get().asFile
    )
    if ('runJijtest' in gradle.startParameter.taskNames)
        runtimeOnly files(
            tasks.jijtestJar.archiveFile.get().asFile
        )
}
tasks.whenTaskAdded {
    if (it.name == 'runClient' || it.name == 'runServer') {
        it.dependsOn(':fullJar')
    }
    if (it.name == 'runJijtest') {
        it.dependsOn(':jijtestJar')
    }
}